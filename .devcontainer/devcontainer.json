{
  "name": "Node 20 + Expo (usuario no-root)",
  "build": {
    "dockerfile": "../Dockerfile"
  },
  "remoteUser": "dev",

  // Normalmente no hace falta --privileged.
  // Deja --net=host si quieres usar Metro/Expo en puertos locales.
  "runArgs": ["--net", "host"],

  "customizations": {
    "vscode": {
      "extensions": [
        "ms-vscode.vscode-typescript-next",
        "esbenp.prettier-vscode",
        "ms-vscode.vscode-json",
        "expo.vscode-expo-tools",
        "dbaeumer.vscode-eslint"
      ],
      "settings": {
        "terminal.integrated.shell.linux": "/bin/bash"
      }
    }
  },

  // Ajusta la ruta del proyecto si no usas monorepo
  "postCreateCommand": " cd apps/mobile/ &&  npm ci || npm install",
  "postStartCommand": "git config --global --add safe.directory /workspaces"
}
